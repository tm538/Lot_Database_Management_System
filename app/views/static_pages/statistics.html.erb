<% provide(:title, 'Statistics') %>
<h1>LDMS Statistics</h1>

<%= render 'static_pages/stats' %>

<div class="row">
	<div class="span3 offset0">	
		<div class="data-entry-header">
		  <h2><i class="icon-signal icon-white"></i> Core Stats 1<a href="#stats" data-toggle="collapse" class="pull-right  icon-resize-vertical icon-white"></a>
		  </h2>
		</div>
		<p>Key LDMS stats at a glace.</p>
		<div id="stats" class="collapse in">
			<table class="table table-condensed">
				<tr>
					<th>Total Clients:</th>
					<td><%= Client.find(:all).count %> </td>
				</tr>
				<tr>
					<th>Total Users:</th>
					<td><%= User.find(:all).count %></td>
				</tr>
				<tr>
					<th>Total Batches:</th>
					<td><%= Batch.find(:all).count %></td>
				</tr>
				<tr>
					<th>Total Samples:</th>
					<td><%= Lot.find(:all).count %> </td>
				</tr>
				<tr>
					<th>Commercial:</th>
					<td><%= Lot.where(commercial: true).count %> </td>
				</tr>
				<tr>
					<th>Non-commercial:</th>
					<td><%= Lot.where(commercial: false).count %> </td>
				</tr>
				<tr>
					<th>Samples this month:</th>
					<td><%= Lot.total_on(Date.today.beginning_of_month) %></td>
				</tr>
				<tr>
					<th>Samples last month</th>
					<td><%= Lot.total_on(1.month.ago.beginning_of_month) %></td>
				</tr>
			</table>
		</div>
	</div>
	
	<div class="span9 offset0">	
		<div class="data-entry-header">
		  <h2> Monthly Sample Totals<a href="#stats1" data-toggle="collapse" class="pull-right  icon-resize-vertical icon-white"></a>
		  </h2>
		</div>
		<p>Monthly commercial and non-commercial sample totals.</p>
		<div id="stats1" class="collapse">
		  <div id="com_chart" style="width:auto; height:400px;"></div>
		</div>
	
		<div class="data-entry-header">
		  <h2> Commercial Sample Breakdown <a href="#stats2" data-toggle="collapse" class="pull-right  icon-resize-vertical icon-white"></a>
		  </h2>
		</div>
		<p>Monthly commercial client breakdown by client.</p>
		<div id="stats2" class="collapse">
		  <div id="client_chart" style="width:auto; height:400px;"></div>
		</div>

		<div class="data-entry-header">
		  <h2> Analysis breakdown <a href="#stats3" data-toggle="collapse" class="pull-right  icon-resize-vertical icon-white"></a>
		  </h2>
		</div>
		<p>Analysis breakdown by analysis type.</p>
		<div id="stats3" class="collapse in">
		  <div id="analysis_chart" style="width:auto; height:400px;"></div>
		</div>
		
	</div>
	
</div>	