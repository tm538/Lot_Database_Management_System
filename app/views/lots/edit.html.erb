<% provide(:title, 'Update lot') %>
<h1>Lot Number: <%= @lot.id.to_s %></h1>

<div class="row">
  <div class="span4 offset0">
  	<div class="data-entry-header">
	  <h2>Changelog <a href="#history" data-toggle="collapse" class="pull-right  icon-resize-vertical icon-white"></a>
	  </h2>
	</div>
	<p>Histoy of changes to this lot <%= @lot.id.to_s %>.</p>

	<div id="history" class="collapse in">
		Placeholder....
	</div>
		
	<div class="data-entry-header">
	  <h2>Actions <a href="#options" data-toggle="collapse" class="pull-right  icon-resize-vertical icon-white"></a>
	  </h2>
	</div>
	<p>Options related to this lot.</p>

	<div id="options" class="collapse in">
		Placeholder....
	</div>
 </div>


  <div class="span7 offset1">

	<%= form_for(@lot, :html => { :class => "form-horizontal" }) do |f| %>
	<%= render 'shared/error_messages', object: f.object %>
	   <div class="data-entry-header">
		  	<h2>Client Info <a href="#client_info" data-toggle="collapse" class="pull-right  icon-resize-vertical icon-white"></a>
		  	</h2>
		  </div>
		  <p>Infomation about the client for commercial samples (Staff only).</p>
		  
		  <div id="client_info" class="collapse in">
			  <div class="control-group">
			  	<%= f.label :client_id, "Client", :class => "control-label" %>	  	
			  	<div class="controls">
			  		<%= f.collection_select(:client_id, Client.all, :id, :org) %>
			  	</div>
			  </div>
			  
			  <div class="control-group">
			  	<%= f.label :commercial, :class => "control-label" %>
			  	<div class="controls">
		  			<%= f.select :commercial, options_for_select([["Non-Commercial", false], ["Commercial", true]], @lot.commercial) %>
			  	</div>
			  </div> 
			  	  
			  <div class="control-group">
			  	<%= f.label :samp_id, "Client Sample ID", :class => "control-label" %>
			  	<div class="controls">
		      		<%= f.text_field :samp_id, :placeholder => "eg. Durham - ABC123" %>
		      	</div>
			  </div>
		  </div>
		  
		  <div class="data-entry-header">
		  	<h2>Sample Details <a href="#samp_det" data-toggle="collapse" class="pull-right  icon-resize-vertical icon-white"></a>
		  	</h2>
		  </div>
		  <p>Details about the sample, unknown fields should be left blank to be completed when known.</p>
		  
		  <div id="samp_det" class="collapse">
			  <div class="control-group">
			  	<%= f.label :sampletype_id, "Sample type", :class => "control-label" %>
			  	<div class="controls">
			  		<%= f.collection_select(:sampletype_id, Sampletype.all, :id, :name, prompt: true) %>
			    </div>
			  </div>
			  
			  <div class="control-group">
			  	<%= f.label :commonname_id, "Common Name", :class => "control-label" %>
			  	<div class="controls">
			  		<%= f.collection_select(:commonname_id, Commonname.all, :id, :name, prompt: true) %>
			    </div>
			  </div>
			  
			  <div class="control-group">
			  	<%= f.label :phylum, :class => "control-label" %>
			  	<div class="controls">
		      		<%= f.text_field :phylum, :placeholder => "eg. Chordata" %>
			    </div>
			  </div>
			  
			  <div class="control-group">
			  	<%= f.label :l_class, "Class", :class => "control-label" %>
			  	<div class="controls">
		      		<%= f.text_field :l_class, :placeholder => "eg. Mammalia" %>
			    </div>
			  </div>
			  
			  <div class="control-group">
			  	<%= f.label :genus, :class => "control-label" %>
			  	<div class="controls">
		     		 <%= f.text_field :genus, :placeholder => "eg. Homo" %>
			    </div>
			  </div>
			  
			  <div class="control-group">
			  	<%= f.label :species, :class => "control-label" %>
			  	<div class="controls">
		      		<%= f.text_field :species, :placeholder => "eg. Sapiens" %>
			    </div>
			  </div>
		  </div>
		  
		  <div class="data-entry-header">  
		  	<h2>Sample Storage Info <a href="#store_info" data-toggle="collapse" class="pull-right  icon-resize-vertical icon-white"></a>
		  	</h2>
		  </div>
		  <p>Infomation here helps identify and manage samples.</p>
		  
		  <div id="store_info" class="collapse">
			  <div class="control-group">
			  	<%= f.label :sample_form, "Sample Form", :class => "control-label" %>
			  	<div class="controls">
			  		<%= f.text_field :sample_form, :placeholder => "eg. 'Foil pack' or 'test tube'" %>	
			    </div>
			  </div>
			    	  
			  <div class="control-group">
			  	<%= f.label :to_return, "Return sample when finished?", :class => "control-label" %>
			  	<div class="controls">
			  		<%= f.select :to_return, options_for_select([["Yes", "YES"], ["No (destroy)", "NO"], ["Archive", "ARCHIVE"]]) %>
			    </div>
			  </div>
		   </div>  
		  
		  <div class="data-entry-header">  	  
		  	<h2>Geographic Info <a href="#geo_info" data-toggle="collapse" class="pull-right  icon-resize-vertical icon-white"></a>
		  	</h2>
		  </div>
		  <p>Geographic Infomation about where the sample was taken from.</p>
		  
		  <div id="geo_info" class="collapse">
			  <div class="control-group">
			  	<%= f.label :region, "Geographic region", :class => "control-label" %>
			  	<div class="controls">
		      		<%= f.text_field :region, :placeholder => "eg. North Yorks" %>
			    </div>
			  </div>
		  
		    	  
			  <div class="control-group">
			  	<%= f.label :site, "Archeological site", :class => "control-label" %>
			  	<div class="controls">
		      		<%= f.text_field :site, :placeholder => "eg. York - Heslington East" %>
			    </div>
			  </div>
		  </div>
		  
		  <div class="data-entry-header">    
	  	  	<h2>Analysis <a href="#anal_info" data-toggle="collapse" class="pull-right  icon-resize-vertical icon-white"></a>
		  	</h2>
	  	  </div>
	  	  <p> Infomation about analysis and who will be carrying it out.</p>
	  	  
	  	  <div id="anal_info" class="collapse">
		  	  <div class="control-group">
		  	  	<%= f.label :analysis_by, "Analysis to be carried out by", :class => "control-label" %>
		  	  	<div class="controls">
			  		<%= f.collection_select(:analysis_by, User.all, :id, :name, prompt: true) %>
			    </div>
			  </div>
			  
			  <p>Please select all methods that apply:</p>
		    <div class="control-group">
		  		<%= f.label :isotopes, :class => "control-label" %>
		  		<div class="controls">
		  			<%= f.check_box :isotopes %>
		  		</div>
			</div>
		  
			<div class="control-group">	  
		  		<%= f.label :zooms, "ZooMS", :class => "control-label" %>
		  		<div class="controls">
		  			<%= f.check_box :zooms %>
		  		</div>
			</div>
				  	
		  	<div class="control-group">
		  		<%= f.label :aar, "AAR", :class => "control-label" %>
		  		<div class="controls">
		  			<%= f.check_box :aar %>
		  		</div>
			</div>
				  	
		  	<div class="control-group">
		  		<%= f.label :lipid, :class => "control-label" %>
		  		<div class="controls">
		  			<%= f.check_box :lipid %>
		  		</div>
			</div>
				  	
		  	<div class="control-group">
		  		<%= f.label :dna, "DNA", :class => "control-label" %>
		  		<div class="controls">
		  			<%= f.check_box :dna %>
		  		</div>
			</div>
				  
		  	<div class="control-group">
			  	<%= f.label :analysis_other, "Other Methods:", :class => "control-label" %>
			  	<div class="controls">
		      		<%= f.text_field :analysis_other, :placeholder => "" %>
			    </div>
			  </div>
		  </div>
		  
		  <div class="data-entry-header">    
	  	  	<h2>Extra Info <a href="#extra_info" data-toggle="collapse" class="pull-right  icon-resize-vertical icon-white"></a>
		  	</h2>
	  	  </div>
	  	  <p>Any extra infomation not recorded elsewhere.</p>
	  	  
	  	  <div id="extra_info" class="collapse">
			  <div class="control-group">
			  	<%= f.label :extra_info, "Additional infomation", :class => "control-label" %>
			  	<div class="controls">
		      		<%= f.text_area :extra_info, :placeholder => "Any additional infomation regarding the sample..." %>
			    </div>
			  </div>
		  </div>
		  
		  <div class="data-entry-header">    
	  	  	<h2>Aduit Log <a href="#audit_info" data-toggle="collapse" class="pull-right  icon-resize-vertical icon-white"></a>
		  	</h2>
	  	  </div>
	  	  <p> Infomation recorded for aduiting purposes against any updates to this record.</p>
	  	 
	  	  <div id="audit_info" class="collapse">
		  	  <div class="control-group">
		  	  	<label class="control-label" for="lot_created_at_dummy">Last Updated</label>
		  	  	<div class="controls">
		      		<input id="lot_created_at_dummy" name="lot[created_at]" readonly="readonly" type="datetime" value="<%= @lot.created_at.to_s %>">
		 	    </div>
			  </div>
		         
		      <div class="control-group">
		      	<label for="lot_data_entered_by_dummy" class="control-label">Last updated by</label>
		      	<div class="controls">
			  		<input id="lot_data_entered_by_dummy" readonly="readonly" type="text" value="<%= @user.name.to_s %>">
			    </div>
			  </div>
		  </div>
	<% end %>

  </div>
</div>